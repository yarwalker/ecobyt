jQuery(document).ready(function(a){var e=a("#yith_wcmc_mailchimp_list, #yith_wcmc_shortcode_mailchimp_list, #yith_wcmc_widget_mailchimp_list, #yith_wcmc_export_list"),l=a("#yith_wcmc_mailchimp_groups, #yith_wcmc_shortcode_mailchimp_groups, #yith_wcmc_widget_mailchimp_groups");e.after(a("<a>").addClass("button button-secondary ajax-mailchimp-updater ajax-mailchimp-updater-list").attr("id","yith_wmcm_mailchimp_list_updater").attr("href","#").text(yith_wcmc.labels.update_list_button));l.after(a("<a>").addClass("button button-secondary ajax-mailchimp-updater ajax-mailchimp-updater-group").attr("id",
    "yith_wcmc_mailchimp_group_updater").attr("href","#").text(yith_wcmc.labels.update_group_button));var m=function(b){var c=a(this),d=c.prev("select"),e=d.find("option:selected").val();b.preventDefault();a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){c.unblock()},data:{request:"lists/list",force_update:!0,args:{sort_field:"web"},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},
    dataType:"json",method:"POST",success:function(a){var c="",b=0;if(0!=a.data.length)for(b in a.data)c+='<option value="'+a.data[b].id+'" '+(e==a.data[b].id?'selected="selected"':"")+" >"+a.data[b].name+"</option>";d.html(c);0==c.length?d.prop("disabled"):d.removeProp("disabled")},url:ajaxurl})},g=function(b){var c=a(this).hasClass("ajax-mailchimp-updater-group")?a(this).prev("select"):a(this).parents("tr").next().find("select"),d=c.closest("td"),e=c.closest("tr").prev().find("select").find("option:selected").val(),
    g=[];c.find("option:selected").each(function(c,b){g[c]=a(b).val()});b.preventDefault();0==e.length?c.prop("disabled"):c.removeProp("disabled");a.ajax({beforeSend:function(){d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){d.unblock()},data:{request:"lists/interest-groupings",force_update:!0,args:{id:e},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},dataType:"json",method:"POST",success:function(b){var d=
    "",e=0;if(0!=b.length)for(e in b){var k=0,f=b[e];if(0!=f.groups.length)for(k in f.groups)var h=f.groups[k],d=d+('<option value="'+f.id+"-"+h.name+'" '+(-1<a.inArray(f.id+"-"+h.name,g)?'selected="selected"':"")+" >"+f.name+" - "+h.name+"</option>")}console.log(d);c.html(d);0==d.length?c.prop("disabled"):c.removeProp("disabled");c.select2()},url:ajaxurl})},e=function(){a(document).off("click",".ajax-mailchimp-updater-list");a(document).off("click",".ajax-mailchimp-updater-group");a(document).off("change",
    ".list-select");a(document).on("click",".ajax-mailchimp-updater-list",m);a(document).on("click",".ajax-mailchimp-updater-group",g);a(document).on("change",".list-select",g)};e();a("body").on("add_updater_handler",e);a("#yith_wcmc_checkout_trigger").on("change",function(){var b=a(this),c=a("#yith_wcmc_subscription_checkbox"),d=a("#yith_wcmc_double_optin");"never"!=b.val()?(c.parents("tr").show(),d.parents("tr").show(),a("#yith_wcmc_email_type").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_label").parents("tr").show(),
    a("#yith_wcmc_subscription_checkbox_position").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").show(),a("#yith_wcmc_update_existing").parents("tr").show(),a("#yith_wcmc_replace_interests").parents("tr").show(),a("#yith_wcmc_send_welcome").parents("tr").show(),c.change(),d.change()):(c.parents("tr").hide(),d.parents("tr").hide(),a("#yith_wcmc_email_type").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_label").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").hide(),
    a("#yith_wcmc_subscription_checkbox_default").parents("tr").hide(),a("#yith_wcmc_update_existing").parents("tr").hide(),a("#yith_wcmc_replace_interests").parents("tr").hide(),a("#yith_wcmc_send_welcome").parents("tr").hide())}).change();a("#yith_wcmc_ecommerce360_enable").on("change",function(){var b=a(this),c=a("#yith_wcmc_ecommerce360_cookie_lifetime");b.is(":checked")?c.parents("tr").show():c.parents("tr").hide()}).change();a("#yith_wcmc_subscription_checkbox").on("change",function(){var b=a(this);
    b.is(":visible")&&(b.is(":checked")?(a("#yith_wcmc_subscription_checkbox_label").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").show()):(a("#yith_wcmc_subscription_checkbox_label").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").hide()))}).change();a("#yith_wcmc_double_optin").on("change",function(){var b=
    a(this);b.is(":visible")&&(b.is(":checked")?a("#yith_wcmc_send_welcome").parents("tr").hide():a("#yith_wcmc_send_welcome").parents("tr").show())}).change();a("#yith_wcmc_shortcode_double_optin").on("change",function(){var b=a(this);b.is(":visible")&&(b.is(":checked")?a("#yith_wcmc_shortcode_send_welcome").parents("tr").hide():a("#yith_wcmc_shortcode_send_welcome").parents("tr").show())}).change();a("#yith_wcmc_widget_double_optin").on("change",function(){var b=a(this);b.is(":visible")&&(b.is(":checked")?
    a("#yith_wcmc_widget_send_welcome").parents("tr").hide():a("#yith_wcmc_widget_send_welcome").parents("tr").show())}).change()});